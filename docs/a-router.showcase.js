import{T as e,O as t,x as r,p as a,C as n,R as o,P as s,w as l}from"./chunks/61e0f1f4.js";export{d as render}from"./chunks/61e0f1f4.js";import{u}from"./chunks/e8be573d.js";function p(){return location.pathname}function c(e){e!=p()&&(history.pushState({},"history",e),window.dispatchEvent(new PopStateEvent("popstate")))}const i=/([^\/]+)/g,h=/^(:)(\w+)(\?|(\.){3}){0,1}/,m={},f={};function g(e){return e.replace(/(\/){2,}/g,"/").replace(/([^\/]+)\/$/,"$1")}function w(e,t){e=g(e),t=g(t),f[e]||(f[e]=function(e){let t=e.match(i)||[""],r=[];return{regexp:new RegExp("^"+t.map(e=>{let[t,a,n,o]=e.match(h)||[];return a?(r.push(n),"..."===o?"(.*)":"?"===o?"(?:\\/){0,1}([^\\/]*)":"\\/([^\\/]+)"):`\\/(?:${e.replace(/(\.|\-)/g,"\\$1").replace(/\*/g,"[^\\/]+").replace(/\((?!\?\:)/g,"(?:")})`}).join("")+"$","i"),params:r,logs:{}}}(e));let{regexp:r,params:a,logs:n}=f[e];if(n[t])return n[t];let o=t.match(r);return n[t]=[!!o,o?o.slice(1).reduce((e,t,r)=>(e[a[r]||r]=t,e),{}):m]}function y(){let r=p(),[,a]=e({pathname:r});return t(()=>function(e){return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)}((function(){let e=p();a(t=>t.pathname!=e?{pathname:e}:t)})),[]),[r,c]}const v=({path:e})=>a("host",{onclick:t=>{let r,{target:a}=t;for(;a;){if(r=a.getAttribute("href"),a.hasAttribute("ignore"))return;a=r?0:a.parentElement}t.preventDefault(),r&&c(g((e||"/")+"/"+(r||"/")))}}),x=({src:e,path:r})=>{let s=n(),l=o("UpdatedARouterCase",{bubbles:!0,composed:!0});return t(()=>{let e,{current:t}=s;return l(t=>e=t),()=>{!t.isConnected&&e()}},[e,r]),a("host",null)},b={src:()=>Promise.resolve(()=>a("slot",{name:"404"}))};x.props={path:{type:String,reflect:!0},src:{type:l},default:{type:Boolean}},v.props={path:{type:String,value:""}},r("a-router-switch",()=>{let r,n,[o]=y(),l=s({}),[p,c]=e(b),[i,h]=u(()=>"string"==typeof p.src?import(p.src):p.src(),p.src,[p.src]),m=()=>{let e=b;for(let t in l.current){let{src:r,default:a}=l.current[t],[n,s]=w(t,o);if((n||a)&&(e={state:n,params:s,path:t,src:r,pathname:o},!a))break}c(t=>t.pathname==e.pathname?t:e)};return t(m,[o]),a("host",{shadowDom:!0,onUpdatedARouterCase:({target:e,detail:t})=>{let{path:a}=e;l.current[a]=e,t(()=>{delete l.current[a],n||(n=!0,queueMicrotask(m))}),r||(r=!0,queueMicrotask(m))}},"loading"==i?a("slot",{name:"loading"},i):"error"==i?a("slot",{name:"error"},i):"done"==i?h(p.params):"")}),r("a-router-case",x),r("a-router-proxy",v);const k=e=>()=>new Promise(t=>setTimeout(t,1e3,{default:e})),E=k(e=>a("h3",null,"Home")),j=k(e=>a("h3",null,"Config")),S=k(e=>a("h3",null,JSON.stringify(e)));var $=[{label:"Ejemplo",render:()=>a("host",null,a("a-router-proxy",null,a("p",null,"The import effect is emulated with a delay to show the use of the loading slot"),a("nav",null,a("a",{style:"margin:5px",href:"/"},"home"),a("a",{style:"margin:5px",href:"/user"},"user"),a("a",{style:"margin:5px",href:"/config"},"config")),a("a-router-switch",null,a("a-router-case",{path:"/",src:E}),a("a-router-case",{path:"/user",src:j}),a("a-router-case",{path:"/:any...",src:S}),a("h1",{slot:"loading"},"loading..."),a("h1",{slot:"404"},"404"))))}];export default $;
//# sourceMappingURL=a-router.showcase.js.map
