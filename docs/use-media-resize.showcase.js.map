{"version":3,"file":"use-media-resize.showcase.js","sources":["../src/hooks/use-media-resize/use-media-resize.js","../src/hooks/use-media-resize/use-media-resize.showcase.js"],"sourcesContent":["import { useEffect, useState } from \"atomico\";\r\n\r\nfunction getSizes(value) {\r\n  let sizes = { cases: [] };\r\n\r\n  value.split(/ *, */).forEach(value => {\r\n    let size = value.match(/([^\\s]+) +(\\d+)px/);\r\n    if (size) {\r\n      let [, value, number] = size;\r\n      sizes.cases.push([value, Number(number)]);\r\n    } else {\r\n      sizes.default = value;\r\n    }\r\n  });\r\n\r\n  sizes.cases.sort(([, a], [, b]) => (a > b ? 1 : -1));\r\n\r\n  return sizes;\r\n}\r\n\r\nexport function useMediaResize(value) {\r\n  let sizes = getSizes(value);\r\n\r\n  let [state, setState] = useState(() => [null, {}]);\r\n\r\n  state[2] = sizes;\r\n\r\n  useEffect(() => {\r\n    let observer = new ResizeObserver(\r\n      ([\r\n        {\r\n          contentRect: { width }\r\n        }\r\n      ]) => {\r\n        update(width);\r\n      }\r\n    );\r\n\r\n    observer.observe(state[1].current);\r\n\r\n    function update(width) {\r\n      let sizes = state[2];\r\n      if (\r\n        !sizes.cases.some(([value, px]) => {\r\n          if (px >= width) {\r\n            setState(([, ...state]) => [value, ...state]);\r\n            return true;\r\n          }\r\n        })\r\n      ) {\r\n        setState(([value, ...state]) => [sizes.default || value, ...state]);\r\n      }\r\n    }\r\n    return () => resizeObserver.unobserve(state.ref.current);\r\n  }, []);\r\n\r\n  return state;\r\n}\r\n","import { h, customElement } from \"atomico\";\r\nimport { useMediaResize } from \"./use-media-resize\";\r\nexport { render } from \"atomico\";\r\n\r\nconst Example1 = ({ src }) => {\r\n  const [state, ref] = useMediaResize(src);\r\n  return (\r\n    <host ref={ref} shadowDom>\r\n      <style>{`:host{display:block;width:100%}img{width:100%}`}</style>\r\n      <img src={state} />\r\n    </host>\r\n  );\r\n};\r\n\r\nExample1.props = {\r\n  src: String\r\n};\r\n\r\ncustomElement(\"use-media-resize-example-1\", Example1);\r\n\r\nexport default [\r\n  {\r\n    label: \"Example useMediaResize\",\r\n    render() {\r\n      const url = \"https://via.placeholder.com/\";\r\n      return (\r\n        <use-media-resize-example-1\r\n          src={`${url}1080x150, ${url}720x200 720px, ${url}520x300 520px, ${url}320x500 240px`}\r\n        ></use-media-resize-example-1>\r\n      );\r\n    }\r\n  }\r\n];\r\n"],"names":["getSizes","value","sizes","cases","split","forEach","size","match","number","push","Number","default","sort","a","b","useMediaResize","state","setState","useState","useEffect","observer","ResizeObserver","contentRect","width","update","observe","current","some","px","resizeObserver","unobserve","ref","Example1","src","h","props","String","customElement","label","render","url"],"mappings":"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"}