{"version":3,"file":"dfb56040.js","sources":["../../src/hooks/use-lazy/use-lazy.js"],"sourcesContent":["import { useState, useEffect } from \"atomico\";\r\n\r\nexport const USE_LAZY_UNIMPORT = \"unimport\";\r\nexport const USE_LAZY_LOADING = \"loading\";\r\nexport const USE_LAZY_ERROR = \"error\";\r\nexport const USE_LAZY_DONE = \"done\";\r\n/**\r\n *\r\n *\r\n * @param {()=>Promise} callbackImport -\r\n * @param {boolean} initImport -\r\n *\r\n * @example\r\n * useLazy(()=>import(\"./any.js\"),initRequest);\r\n */\r\nexport function useLazy(callbackImport, initImport, reload = []) {\r\n  const [state, setState] = useState([USE_LAZY_UNIMPORT]);\r\n\r\n  useEffect(() => {\r\n    if (!initImport) return;\r\n    let cancel;\r\n    let done;\r\n\r\n    setTimeout(\r\n      () =>\r\n        !done &&\r\n        !canel &&\r\n        setState(state =>\r\n          state[0] == USE_LAZY_LOADING ? state : [USE_LAZY_LOADING]\r\n        ),\r\n      100\r\n    );\r\n\r\n    callbackImport()\r\n      .then(md =>\r\n        setState(state => {\r\n          cancel\r\n            ? state\r\n            : [USE_LAZY_DONE, md && \"default\" in md ? md.default : md];\r\n        })\r\n      )\r\n      .catch(error =>\r\n        setState(state => (cancel ? state : [USE_LAZY_ERROR, error]))\r\n      );\r\n\r\n    return () => (cancel = true);\r\n  }, [initImport, ...reload]);\r\n\r\n  return state;\r\n}\r\n"],"names":["USE_LAZY_UNIMPORT","USE_LAZY_LOADING","USE_LAZY_ERROR","USE_LAZY_DONE","useLazy","callbackImport","initImport","reload","state","setState","useState","useEffect","cancel","setTimeout","canel","then","md","default","catch","error"],"mappings":";;AAEO,MAAMA,iBAAiB,GAAG,UAA1B;AACA,MAAMC,gBAAgB,GAAG,SAAzB;AACA,MAAMC,cAAc,GAAG,OAAvB;AACA,MAAMC,aAAa,GAAG,MAAtB;AACP;;;;;;;;;;AASO,SAASC,OAAT,CAAiBC,cAAjB,EAAiCC,UAAjC,EAA6CC,MAAM,GAAG,EAAtD,EAA0D;AAC/D,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBC,QAAQ,CAAC,CAACV,iBAAD,CAAD,CAAlC;AAEAW,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACL,UAAL,EAAiB;AACjB,QAAIM,MAAJ;AAGAC,IAAAA,UAAU,CACR,OAEE,CAACC,KADD,IAEAL,QAAQ,CAACD,KAAK,IACZA,KAAK,CAAC,CAAD,CAAL,IAAYP,gBAAZ,GAA+BO,KAA/B,GAAuC,CAACP,gBAAD,CADjC,CAJF,EAOR,GAPQ,CAAV;AAUAI,IAAAA,cAAc,GACXU,IADH,CACQC,EAAE,IACNP,QAAQ,CAACD,KAAK,IAAI;AAChBI,MAAAA,MAAM,GACFJ,KADE,GAEF,CAACL,aAAD,EAAgBa,EAAE,IAAI,aAAaA,EAAnB,GAAwBA,EAAE,CAACC,OAA3B,GAAqCD,EAArD,CAFJ;AAGD,KAJO,CAFZ,EAQGE,KARH,CAQSC,KAAK,IACVV,QAAQ,CAACD,KAAK,IAAKI,MAAM,GAAGJ,KAAH,GAAW,CAACN,cAAD,EAAiBiB,KAAjB,CAA5B,CATZ;AAYA,WAAO,MAAOP,MAAM,GAAG,IAAvB;AACD,GA5BQ,EA4BN,CAACN,UAAD,EAAa,GAAGC,MAAhB,CA5BM,CAAT;AA8BA,SAAOC,KAAP;AACD;;;;"}