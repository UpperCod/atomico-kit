{"version":3,"file":"use-stylesheet.showcase.js","sources":["../src/hooks/use-stylesheet/use-stylesheet.js","../src/hooks/use-stylesheet/use-stylesheet.showcase.js"],"sourcesContent":["import { useHost, useEffect } from \"atomico\";\n\nlet cache = {};\n\n/**\n * Add support to styleSheet, only in browsers that\n * implement it, it is remembered that adoptedStyleSheets\n * (05/13/2020) is not standard of the w3 is just a\n * valid implementation for google crhome\n * @param  {...(string|CSSStyleSheet)} stylesheet\n */\nexport function useStylesheet(...stylesheet) {\n  let ref = useHost();\n  useEffect(() => {\n    let { current } = ref;\n    if (current.shadowRoot && current.shadowRoot.adoptedStyleSheets) {\n      ref.prev = ref.prev || [];\n      let shadowRootPrev = current.shadowRoot.adoptedStyleSheets.filter(\n        (styleSheet) => !ref.prev.includes(styleSheet)\n      );\n      ref.prev = stylesheet.map((css) => {\n        if (typeof css == \"string\" && !cache[css]) {\n          let sheet = new CSSStyleSheet();\n          sheet.replace(css);\n          cache[css] = sheet;\n        }\n        return cache[css] || css;\n      });\n      current.shadowRoot.adoptedStyleSheets = [...shadowRootPrev, ...ref.prev];\n    }\n  }, stylesheet);\n}\n","import { h, customElement, useState } from \"atomico\";\r\nimport { useStylesheet } from \"./use-stylesheet\";\r\nexport { render } from \"atomico\";\r\n\r\nconst Example1 = ({ src }) => {\r\n  let [state, setState] = useState(0);\r\n  useStylesheet(`:host{color:red}`, `:host{background:rgba(0,0,0,.${state})}`);\r\n\r\n  return (\r\n    <host shadowDom>\r\n      <h1>Is the text red?</h1>\r\n      <button onclick={() => setState(state + 1 > 10 ? 0 : state + 1)}>\r\n        update : {state}\r\n      </button>\r\n    </host>\r\n  );\r\n};\r\n\r\nExample1.props = {\r\n  src: String,\r\n};\r\n\r\ncustomElement(\"use-stylesheet-example-1\", Example1);\r\n\r\nexport default [\r\n  {\r\n    label: \"Example useStylesheet\",\r\n    render() {\r\n      return (\r\n        <host>\r\n          <use-stylesheet-example-1></use-stylesheet-example-1>\r\n        </host>\r\n      );\r\n    },\r\n  },\r\n];\r\n"],"names":["cache","Example1","src","state","setState","useState","stylesheet","ref","useHost","useEffect","current","shadowRoot","adoptedStyleSheets","prev","shadowRootPrev","filter","styleSheet","includes","map","css","sheet","CSSStyleSheet","replace","useStylesheet","h","shadowDom","onclick","props","String","customElement","label","render"],"mappings":"mHAEA,IAAIA,EAAQ,GCEZ,MAAMC,EAAW,EAAGC,IAAAA,UACbC,EAAOC,GAAYC,EAAS,UDM5B,YAA0BC,OAC3BC,EAAMC,IACVC,EAAU,SACJC,QAAEA,GAAYH,KACdG,EAAQC,YAAcD,EAAQC,WAAWC,mBAAoB,CAC/DL,EAAIM,KAAON,EAAIM,MAAQ,OACnBC,EAAiBJ,EAAQC,WAAWC,mBAAmBG,OACxDC,IAAgBT,EAAIM,KAAKI,SAASD,IAErCT,EAAIM,KAAOP,EAAWY,IAAKC,OACP,iBAAPA,IAAoBnB,EAAMmB,GAAM,KACrCC,EAAQ,IAAIC,cAChBD,EAAME,QAAQH,GACdnB,EAAMmB,GAAOC,SAERpB,EAAMmB,IAAQA,IAEvBT,EAAQC,WAAWC,mBAAqB,IAAIE,KAAmBP,EAAIM,QAEpEP,GCxBHiB,CAAe,mBAAoB,gCAA+BpB,OAGhEqB,UAAMC,cACJD,gCACAA,YAAQE,QAAS,IAAMtB,EAASD,EAAQ,EAAI,GAAK,EAAIA,EAAQ,gBACjDA,KAMlBF,EAAS0B,MAAQ,CACfzB,IAAK0B,QAGPC,EAAc,2BAA4B5B,GAE1C,MAAe,CACb,CACE6B,MAAO,wBACPC,OAAM,IAEFP,cACEA"}