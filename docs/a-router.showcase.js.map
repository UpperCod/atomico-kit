{"version":3,"file":"a-router.showcase.js","sources":["../src/components/a-router/a-router.js","../src/components/a-router/a-router.showcase.js"],"sourcesContent":["import {\n  h,\n  customElement,\n  Any,\n  useRef,\n  useHost,\n  useEvent,\n  useEffect\n} from \"atomico\";\n\nimport style from \"./a-router.css\";\n\nconst ARouterCase = ({ src, path }) => {\n  let refHost = useHost();\n\n  let dispatchUpdatedARouterCase = useEvent(\"UpdatedARouterCase\", {\n    bubbles: true\n  });\n\n  useEffect(() => {\n    let { current } = refHost;\n    let disconect;\n    dispatchUpdatedARouterCase(callback => (disconect = callback));\n    return () => {\n      !current.isConnected && disconect();\n    };\n  }, [src]);\n\n  return <host></host>;\n};\n\nconst ARouterSwitch = () => {\n  let ref = useRef({});\n\n  let chunkUpdate;\n  let chunkRemove;\n\n  let define = () => {\n    console.log(ref.current);\n  };\n\n  return (\n    <host\n      shadowDom\n      onUpdatedARouterCase={({ target, detail }) => {\n        let { src, path } = target;\n        ref.current[path] = src;\n        detail(() => {\n          delete ref.current[path];\n          if (!chunkRemove) {\n            chunkRemove = true;\n            queueMicrotask(define);\n          }\n        });\n        if (!chunkUpdate) {\n          chunkUpdate = true;\n          queueMicrotask(define);\n        }\n      }}\n    >\n      <style>{style}</style>\n    </host>\n  );\n};\n\nARouterCase.props = {\n  path: {\n    type: String,\n    reflect: true\n  },\n  src: {\n    type: Any\n  }\n};\n\ncustomElement(\"a-router-switch\", ARouterSwitch);\ncustomElement(\"a-router-case\", ARouterCase);\n","import { h } from \"atomico\";\r\nexport { render } from \"atomico\";\r\nimport \"./a-router\";\r\n\r\nconst callback = () =>\r\n  new Promise(resolve => setTimeout(resolve, 1000, () => <h1>...</h1>));\r\n\r\nexport default [\r\n  {\r\n    label: \"Ejemplo\",\r\n    render() {\r\n      return (\r\n        <a-router-switch>\r\n          <a-router-case path=\"/\" src={callback}></a-router-case>\r\n          <a-router-case path=\"/id\" src={callback}></a-router-case>\r\n        </a-router-switch>\r\n      );\r\n    }\r\n  }\r\n];\r\n"],"names":["ARouterCase","src","path","refHost","useHost","dispatchUpdatedARouterCase","useEvent","bubbles","useEffect","current","disconect","callback","isConnected","h","ARouterSwitch","ref","useRef","chunkUpdate","chunkRemove","define","console","log","target","detail","queueMicrotask","style","props","type","String","reflect","Any","customElement","Promise","resolve","setTimeout","label","render"],"mappings":";;;;;AAYA,MAAMA,WAAW,GAAG,CAAC;AAAEC,EAAAA,GAAF;AAAOC,EAAAA;AAAP,CAAD,KAAmB;AACrC,MAAIC,OAAO,GAAGC,OAAO,EAArB;AAEA,MAAIC,0BAA0B,GAAGC,QAAQ,CAAC,oBAAD,EAAuB;AAC9DC,IAAAA,OAAO,EAAE;AADqD,GAAvB,CAAzC;AAIAC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI;AAAEC,MAAAA;AAAF,QAAcN,OAAlB;AACA,QAAIO,SAAJ;AACAL,IAAAA,0BAA0B,CAACM,QAAQ,IAAKD,SAAS,GAAGC,QAA1B,CAA1B;AACA,WAAO,MAAM;AACX,OAACF,OAAO,CAACG,WAAT,IAAwBF,SAAS,EAAjC;AACD,KAFD;AAGD,GAPQ,EAON,CAACT,GAAD,CAPM,CAAT;AASA,SAAOY,2BAAP;AACD,CAjBD;;AAmBA,MAAMC,aAAa,GAAG,MAAM;AAC1B,MAAIC,GAAG,GAAGC,MAAM,CAAC,EAAD,CAAhB;AAEA,MAAIC,WAAJ;AACA,MAAIC,WAAJ;;AAEA,MAAIC,MAAM,GAAG,MAAM;AACjBC,IAAAA,OAAO,CAACC,GAAR,CAAYN,GAAG,CAACN,OAAhB;AACD,GAFD;;AAIA,SACEI;AACE,IAAA,SAAS,MADX;AAEE,IAAA,oBAAoB,EAAE,CAAC;AAAES,MAAAA,MAAF;AAAUC,MAAAA;AAAV,KAAD,KAAwB;AAC5C,UAAI;AAAEtB,QAAAA,GAAF;AAAOC,QAAAA;AAAP,UAAgBoB,MAApB;AACAP,MAAAA,GAAG,CAACN,OAAJ,CAAYP,IAAZ,IAAoBD,GAApB;AACAsB,MAAAA,MAAM,CAAC,MAAM;AACX,eAAOR,GAAG,CAACN,OAAJ,CAAYP,IAAZ,CAAP;;AACA,YAAI,CAACgB,WAAL,EAAkB;AAChBA,UAAAA,WAAW,GAAG,IAAd;AACAM,UAAAA,cAAc,CAACL,MAAD,CAAd;AACD;AACF,OANK,CAAN;;AAOA,UAAI,CAACF,WAAL,EAAkB;AAChBA,QAAAA,WAAW,GAAG,IAAd;AACAO,QAAAA,cAAc,CAACL,MAAD,CAAd;AACD;AACF;AAhBH,KAkBEN,6BAAQY,KAAR,CAlBF,CADF;AAsBD,CAhCD;;AAkCAzB,WAAW,CAAC0B,KAAZ,GAAoB;AAClBxB,EAAAA,IAAI,EAAE;AACJyB,IAAAA,IAAI,EAAEC,MADF;AAEJC,IAAAA,OAAO,EAAE;AAFL,GADY;AAKlB5B,EAAAA,GAAG,EAAE;AACH0B,IAAAA,IAAI,EAAEG;AADH;AALa,CAApB;AAUAC,aAAa,CAAC,iBAAD,EAAoBjB,aAApB,CAAb;AACAiB,aAAa,CAAC,eAAD,EAAkB/B,WAAlB,CAAb;;ACxEA,MAAMW,QAAQ,GAAG,MACf,IAAIqB,OAAJ,CAAYC,OAAO,IAAIC,UAAU,CAACD,OAAD,EAAU,IAAV,EAAgB,MAAMpB,gCAAtB,CAAjC,CADF;;AAGA,uBAAe,CACb;AACEsB,EAAAA,KAAK,EAAE,SADT;;AAEEC,EAAAA,MAAM,GAAG;AACP,WACEvB,uCACEA;AAAe,MAAA,IAAI,EAAC,GAApB;AAAwB,MAAA,GAAG,EAAEF;AAA7B,MADF,EAEEE;AAAe,MAAA,IAAI,EAAC,KAApB;AAA0B,MAAA,GAAG,EAAEF;AAA/B,MAFF,CADF;AAMD;;AATH,CADa,CAAf;;;;"}