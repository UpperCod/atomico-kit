function R(t,e){let r=t.length;if(r!==e.length)return!1;for(let a=0;a<r;a++)if(t[a]!==e[a])return!1;return!0}const m=t=>typeof t=="function",g=t=>typeof t=="object",E=null,H=[!0,1,"","1","true"];function M(t,e,r,a,o){let{type:n,reflect:i,event:f,value:p,attr:l=D(e)}=g(r)&&r!=E?r:{type:r},s=!(n==Function||n==E);Object.defineProperty(t,e,{set(d){let c=this[e],{error:b,value:h}=L(n,s&&m(d)?d(c):d);if(b&&h!=null)throw{message:`The value defined for prop '${e}' must be of type '${n.name}'`,value:h,target:this};if(c==h)return;this._props[e]=h,this.update(),this.updated.then(()=>{f&&I(this,f),i&&(this._ignoreAttr=l,B(this,n,l,this[e]),this._ignoreAttr=null)})},get(){return this._props[e]}}),p!=null&&(o[e]=p),a[l]=e}const I=(t,{type:e,...r})=>t.dispatchEvent(new CustomEvent(e,r)),D=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase(),B=(t,e,r,a)=>a==null||e==Boolean&&!a?t.removeAttribute(r):t.setAttribute(r,g(a)?JSON.stringify(a):e==Boolean?"":a);function L(t,e){if(t==E)return{value:e};try{if(t==Boolean?e=H.includes(e):typeof e=="string"&&(e=t==Number?Number(e):t==Object||t==Array?JSON.parse(e):e),{}.toString.call(e)==`[object ${t.name}]`)return{value:e,error:t==Number&&Number.isNaN(e)}}catch(r){}return{value:e,error:!0}}const y={};function S(){return N((t={current:y.ref.host})=>t)}function N(t,e){return y.ref.use(t,e)}function F(){return y.ref.render}function q(t,e){let r={},a={use:i,load:n,updated:f},o={use:i,host:e,render:t};function n(p,l){y.index=0,y.ref=o;let s=p(l);return y.ref=0,s}function i(p,l){let s=y.index++;return r[s]=[p(r[s]?r[s][0]:void 0),l],r[s][0]}function f(p){for(let l in r){let s=r[l];s[1]&&(s[0]=s[1](s[0],p))}}return a}const x={id:1,className:1,checked:1,value:1,selected:1},U={list:1,type:1,size:1,form:1,width:1,height:1,src:1},O={},C=[],$=3,v=document,j=Symbol(),T=Symbol(),J=Symbol();function Y(t,e,...r){let a=e||O;return r=_(a.children||r,t=="style"),r.length||(r=C),{vdom:j,type:t,props:a,children:r,key:a.key,shadow:a.shadowDom,raw:t instanceof Node}}function A(t,e,r=J,a){let o;if(e&&e[r]&&e[r].vnode==t)return e;if(t&&t.type&&t.vdom!=j)return e;if((t!=null||!e)&&(a=a||t.type=="svg",o=t.type!="host"&&(t.raw?e!=t.type:e?e.localName!=t.type:!e),o)){let s;if(t.type!=null)s=t.raw?t.type:a?v.createElementNS("http://www.w3.org/2000/svg",t.type):v.createElement(t.type,t.is?{is:t.is}:null);else return v.createTextNode(t+"");e=s}if(e.nodeType==$){if(!t.raw){let s=t+"";e.data!=s&&(e.data=s||"")}return e}let n=e[r]?e[r].vnode:O,i=n.props||O,f=n.children||C,p=o||!e[r]?{}:e[r].handlers,l=e[r]&&e[r].childNodes;if(t.shadow&&(e.shadowRoot||e.attachShadow({mode:"open"})),t.props!=i&&K(e,i,t.props,p,a),t.children!=f){let s=t.shadow?e.shadowRoot:e;l=z(t.children,l||[],s,r,a&&t.type=="foreignObject"?!1:a)}return e[r]={vnode:t,handlers:p,childNodes:l},e}function z(t,e,r,a,o){let n=t._,i=t.length,f=e.length,p=n?0:f>i?i:f,l=[],s=e[a];for(s||(s=r.appendChild(v.createTextNode(""))),l[a]=s;p<f;p++){let d=e[p];if(n){let c=d[T];if(n.has(c)){n.set(c,d);continue}}e.splice(p,1),p--,f--,d.remove()}for(let d=0;d<i;d++){let c=t[d],b=e[d],h=n?c.key:d,u=n?n.get(h):b;if(n&&u&&(u!=b&&r.insertBefore(u,b)),n&&c.key==null)continue;let w=A(c,u,a,o);u?w!=u&&r.replaceChild(w,u):r.insertBefore(w,e[d]||s),l.push(w)}return l}function K(t,e,r,a,o){for(let n in e)n in r||k(t,n,e[n],null,o,a);for(let n in r)k(t,n,e[n],r[n],o,a)}function k(t,e,r,a,o,n){if(e=e=="class"&&!o?"className":e,r=r??null,a=a??null,e in t&&x[e]&&(r=t[e]),a===r||e=="shadowDom")return;if(e[0]=="o"&&e[1]=="n"&&(m(a)||m(r)))W(t,e,a,n);else if(e=="key")t[T]=a;else if(e=="ref")a&&(a.current=t);else if(e=="style"){let i=t.style;r=r||"",a=a||"";let f=g(r),p=g(a);if(f)for(let l in r)if(p)l in a||P(i,l,null);else break;if(p)for(let l in a){let s=a[l];if(f&&r[l]===s)continue;P(i,l,s)}else i.cssText=a}else!o&&!U[e]&&e in t||m(a)||m(r)?t[e]=a??"":a==null?t.removeAttribute(e):t.setAttribute(e,g(a)?JSON.stringify(a):a)}function W(t,e,r,a){e=e.slice(e[2]=="-"?3:2),a.handleEvent||(a.handleEvent=o=>a[o.type].call(t,o)),r?(a[e]||t.addEventListener(e,a),a[e]=r):a[e]&&(t.removeEventListener(e,a),delete a[e])}function P(t,e,r){let a="setProperty";r==null&&(a="removeProperty",r=null),~e.indexOf("-")?t[a](e,r):t[e]=r}function _(t,e,r=[]){for(let a=0;a<t.length;a++){let o=t[a];if(o){if(Array.isArray(o)){_(o,e,r);continue}o.key!=null&&(r._||(r._=new Map),r._.set(o.key,0))}let n=typeof o;o=o==null||n=="boolean"||n=="function"||n=="object"&&(o.vdom!=j||e)?"":o,e?r[0]=(r[0]||"")+o:r.push(o)}return r}async function X(t,e){let r=Symbol(),a=q(()=>t.update(),t),o;t.update=async()=>{if(!o){o=!0;let n;t.updated=new Promise(i=>n=i).then(a.updated),await t.mounted,A(a.load(e,{...t._props}),t,r),o=!1,n()}},await t.unmounted,a.updated(!0)}function Z(t,e=HTMLElement){let r={},a={},{props:o}=t;class n extends e{constructor(){super();this._props={},this.mounted=new Promise(i=>this.mount=i),this.unmounted=new Promise(i=>this.unmount=i),X(this,t);for(let i in a)this[i]=a[i];this.update()}connectedCallback(){this.mount()}disconnectedCallback(){this.unmount()}attributeChangedCallback(i,f,p){if(i===this._ignoreAttr||f===p)return;this[r[i]]=p}}for(let i in o)M(n.prototype,i,o[i],r,a);return n.observedAttributes=Object.keys(r),n}function G(t){let e=F();return N((r=[])=>(r[1]||(r[0]=m(t)?t():t,r[1]=a=>{a=m(a)?a(r[0]):a,a!=r[0]&&(r[0]=a,e())}),r))}function Q(t,e){N(([r,a]=[])=>((a||!a)&&(a&&R(a,e)?r=r||!0:(m(r)&&r(),r=null)),[r,e]),([r,a],o)=>{if(o)m(r)&&r();else return[r||t(a),a]})}export{Q as a,S as b,Z as c,Y as h,G as u};
